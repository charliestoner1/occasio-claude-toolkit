---
name: onboard-venue
description: Venue onboarding pipeline — white-label audit, env template generation, theme validation, feature flag config, asset checklist
disable-model-invocation: false
user-invocable: true
allowed-tools: Read, Grep, Glob, Bash, Write, Task
argument-hint: "<venue-name>"
---

# Onboard Venue — New Client Pipeline

Everything needed to deploy Cantina Booking for a new venue client.

**Venue:** $ARGUMENTS

## Pipeline

### Phase 1: White-Label Readiness (parallel audits)

Launch these as parallel Task agents to verify the codebase is ready for white-labeling:

1. **White-Label Audit** (subagent_type: Explore)
   - Prompt: "Run the white-label-audit skill. Scan app/ and lib/ for hardcoded venue-specific values: venue names ('Cantina', 'Occasio'), company names ('Occasio LLC'), hardcoded logo paths, hardcoded contact info, hardcoded social links, venue-specific theme colors. Exclude seed scripts, documentation, and config default files. Report each hardcoded reference with file:line and what config value it should use."

2. **Theme Validation** (subagent_type: Explore)
   - Prompt: "Read lib/config/theme.ts and verify all 16 city theme presets are properly defined with complete color schemes. Check app/layout.tsx for how themes are applied at runtime. Verify the theme system supports: custom primary/accent/secondary colors, custom gradients, custom glow effects. Report any theme configuration gaps."

3. **Feature Flag Audit** (subagent_type: Explore)
   - Prompt: "Read lib/config/features.ts and list ALL feature flags with their default values. Categorize into: always needed (core booking), optional (premium features), and tier-dependent (basic/pro/enterprise). Create a decision matrix for which flags a new venue typically needs."

### Phase 2: Generate Environment Template

After audits complete, generate a `.env.{venue-slug}` template file with ALL required environment variables, organized by category:

```env
# ============================================
# {VENUE_NAME} — Environment Configuration
# Generated by /onboard-venue
# ============================================

# --- Identity ---
NEXT_PUBLIC_VENUE_NAME="{venue-name}"
NEXT_PUBLIC_VENUE_SLUG="{venue-slug}"
NEXT_PUBLIC_VENUE_TAGLINE=""
NEXT_PUBLIC_VENUE_DESCRIPTION=""

# --- Location ---
NEXT_PUBLIC_VENUE_ADDRESS=""
NEXT_PUBLIC_VENUE_CITY=""
NEXT_PUBLIC_VENUE_STATE=""
NEXT_PUBLIC_VENUE_ZIP=""
NEXT_PUBLIC_VENUE_PHONE=""
NEXT_PUBLIC_VENUE_EMAIL=""
NEXT_PUBLIC_VENUE_TIMEZONE="America/Chicago"

# --- Branding ---
NEXT_PUBLIC_VENUE_LOGO="/branding/{venue-slug}/logo.png"
NEXT_PUBLIC_VENUE_FAVICON="/branding/{venue-slug}/favicon.png"
NEXT_PUBLIC_VENUE_OG_IMAGE="/branding/{venue-slug}/og-image.png"
NEXT_PUBLIC_VENUE_LOGO_WIDTH="200"
NEXT_PUBLIC_VENUE_LOGO_HEIGHT="80"

# --- Social ---
NEXT_PUBLIC_VENUE_INSTAGRAM=""
NEXT_PUBLIC_VENUE_FACEBOOK=""
NEXT_PUBLIC_VENUE_TWITTER=""
NEXT_PUBLIC_VENUE_TIKTOK=""

# --- Theme ---
# Choose a preset: miami, chicago, newyork, lasvegas, hollywood, barcelona,
# budapest, paris, berlin, mykonos, boston, tokyo, gainesville, marbella, monochrome
# Or set individual colors below
NEXT_PUBLIC_THEME_PRESET=""
# NEXT_PUBLIC_COLOR_PRIMARY="#10b981"
# NEXT_PUBLIC_COLOR_ACCENT="#f59e0b"
# (see lib/config/theme.ts for full list)

# --- Currency ---
NEXT_PUBLIC_VENUE_CURRENCY="USD"
NEXT_PUBLIC_VENUE_CURRENCY_SYMBOL="$"

# --- AI Assistant ---
NEXT_PUBLIC_ASSISTANT_NAME="VIP Concierge"
NEXT_PUBLIC_ASSISTANT_GREETING="Welcome! I can help you find the perfect table."

# --- Feature Flags (set to "true" or "false") ---
FEATURE_BOTTLE_SERVICE=true
FEATURE_EVENT_PRICING=true
FEATURE_DYNAMIC_PRICING=false
FEATURE_TIME_SLOTS=true
FEATURE_SPLIT_PAYMENTS=true
FEATURE_DEPOSITS=true
FEATURE_AI_ASSISTANT=true
FEATURE_SMS_NOTIFICATIONS=true
FEATURE_EMAIL_NOTIFICATIONS=true
FEATURE_FLOOR_MAP=true
FEATURE_STAFF_PORTAL=true

# --- External Services (REQUIRED) ---
DATABASE_URL=""
NEXTAUTH_SECRET=""
NEXTAUTH_URL=""
LINQ_API_KEY=""
LINQ_MERCHANT_ID=""
RESEND_API_KEY=""
VAPID_PUBLIC_KEY=""
VAPID_PRIVATE_KEY=""
CRON_SECRET=""

# --- External Services (OPTIONAL) ---
# SMS_ENABLED=true
# TWILIO_ACCOUNT_SID=""
# TWILIO_AUTH_TOKEN=""
# TWILIO_PHONE_NUMBER=""
```

### Phase 3: Asset Checklist

Generate a checklist of assets the venue needs to provide:

```
## Required Assets for {venue-name}

### Logo & Branding
- [ ] Logo file (PNG, transparent background, min 500x200px)
      → Will be placed at: public/branding/{venue-slug}/logo.png
- [ ] Favicon (PNG, square, min 180x180px)
      → Will be placed at: public/branding/{venue-slug}/favicon.png
- [ ] OG Image (PNG, 1200x630px for social sharing)
      → Will be placed at: public/branding/{venue-slug}/og-image.png

### Venue Information
- [ ] Full venue name
- [ ] Tagline / subtitle
- [ ] Physical address
- [ ] Phone number
- [ ] Email address
- [ ] Timezone

### Social Media
- [ ] Instagram URL
- [ ] Facebook URL (optional)
- [ ] Twitter/X URL (optional)
- [ ] TikTok URL (optional)

### Theme Preference
- [ ] Primary brand color (hex)
- [ ] Accent color (hex)
- [ ] OR choose a preset theme

### Operations
- [ ] Table types and minimum spends
- [ ] Operating hours per day of week
- [ ] Bottle/drink menu with prices
- [ ] Floor map layout
- [ ] Staff accounts needed
```

### Phase 4: Post-Setup Commands

List the commands to run after assets and env vars are configured:

```bash
# 1. Generate app icons from venue logo
npx tsx scripts/generate-app-icons.ts

# 2. Generate iOS splash screens
npx tsx scripts/generate-splash-screens.ts

# 3. Run database migrations
npx prisma migrate deploy

# 4. Seed initial data (table types, bottles, etc.)
npx prisma db seed

# 5. Verify build
npm run build

# 6. Run preflight checks
# /preflight
```

### Phase 5: Summary

Present:
- White-label audit results (any hardcoded refs that need fixing)
- Generated env template location
- Asset checklist
- Setup commands
- Estimated time to go live
